<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sally&#39;s Flower Shop - Part 4 | Backend Technical Consultant Onboarding (BTCO)</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Exercises, codes and solutions for the BTCO training program">
    
    <link rel="preload" href="/psae-btco/assets/css/0.styles.ae6c4b4b.css" as="style"><link rel="preload" href="/psae-btco/assets/js/app.d63afb61.js" as="script"><link rel="preload" href="/psae-btco/assets/js/2.3969ddc5.js" as="script"><link rel="preload" href="/psae-btco/assets/js/3.7f90f6a6.js" as="script"><link rel="preload" href="/psae-btco/assets/js/5.6d5f03cc.js" as="script"><link rel="prefetch" href="/psae-btco/assets/js/10.5bcde458.js"><link rel="prefetch" href="/psae-btco/assets/js/11.cf8f5c7a.js"><link rel="prefetch" href="/psae-btco/assets/js/12.9b295f8f.js"><link rel="prefetch" href="/psae-btco/assets/js/13.0fc82dc5.js"><link rel="prefetch" href="/psae-btco/assets/js/14.2e0c10cb.js"><link rel="prefetch" href="/psae-btco/assets/js/15.c65f983f.js"><link rel="prefetch" href="/psae-btco/assets/js/16.89195d07.js"><link rel="prefetch" href="/psae-btco/assets/js/17.1a7e901b.js"><link rel="prefetch" href="/psae-btco/assets/js/18.d0f79296.js"><link rel="prefetch" href="/psae-btco/assets/js/19.e238475a.js"><link rel="prefetch" href="/psae-btco/assets/js/20.c1014938.js"><link rel="prefetch" href="/psae-btco/assets/js/21.88562d51.js"><link rel="prefetch" href="/psae-btco/assets/js/22.550cd687.js"><link rel="prefetch" href="/psae-btco/assets/js/23.65c8ca17.js"><link rel="prefetch" href="/psae-btco/assets/js/24.7fd49ae9.js"><link rel="prefetch" href="/psae-btco/assets/js/25.2466cc21.js"><link rel="prefetch" href="/psae-btco/assets/js/26.0896e2ab.js"><link rel="prefetch" href="/psae-btco/assets/js/27.137735d7.js"><link rel="prefetch" href="/psae-btco/assets/js/28.0a0cdb1a.js"><link rel="prefetch" href="/psae-btco/assets/js/29.d6730b7b.js"><link rel="prefetch" href="/psae-btco/assets/js/30.3a3765e2.js"><link rel="prefetch" href="/psae-btco/assets/js/4.bcf7b13f.js"><link rel="prefetch" href="/psae-btco/assets/js/6.3ab397f0.js"><link rel="prefetch" href="/psae-btco/assets/js/7.a39ec6a2.js"><link rel="prefetch" href="/psae-btco/assets/js/8.87f68678.js"><link rel="prefetch" href="/psae-btco/assets/js/9.d1355fc0.js">
    <link rel="stylesheet" href="/psae-btco/assets/css/0.styles.ae6c4b4b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/psae-btco/" class="home-link router-link-active"><!----> <span class="site-name">Backend Technical Consultant Onboarding (BTCO)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/psae-btco/" aria-current="page" class="sidebar-link">Howdy Partner</a></li><li><section class="sidebar-group depth-0"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active"><span>Exercises</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active open"><span>Sally's Flower Shop</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/psae-btco/exercises/flower_shop.html" class="sidebar-link">Part 1</a></li><li><a href="/psae-btco/exercises/flower_shop_2.html" class="sidebar-link">Part 2</a></li><li><a href="/psae-btco/exercises/flower_shop_3.html" class="sidebar-link">Part 3</a></li><li><a href="/psae-btco/exercises/flower_shop_4.html" class="sidebar-link">Part 4</a></li><li><a href="/psae-btco/exercises/flower_shop_5.html" class="sidebar-link">Part 5</a></li><li><a href="/psae-btco/exercises/flower_shop_6.html" class="sidebar-link">Part 6</a></li><li><a href="/psae-btco/exercises/flower_shop_7.html" class="sidebar-link">Part 7</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active"><span>Awesome School</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active"><span>Realty Management</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active open"><span>Solutions</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active open"><span>Sally's Flower Shop</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/psae-btco/solutions/flower_shop.html" class="sidebar-link">Part 1</a></li><li><a href="/psae-btco/solutions/flower_shop_2.html" class="sidebar-link">Part 2</a></li><li><a href="/psae-btco/solutions/flower_shop_3.html" class="sidebar-link">Part 3</a></li><li><a href="/psae-btco/solutions/flower_shop_4.html" aria-current="page" class="active sidebar-link">Part 4</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/psae-btco/solutions/flower_shop_5.html" class="sidebar-link">Part 5</a></li><li><a href="/psae-btco/solutions/flower_shop_6.html" class="sidebar-link">Part 6</a></li><li><a href="/psae-btco/solutions/flower_shop_7.html" class="sidebar-link">Part 7</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sally-s-flower-shop-part-4"><a href="#sally-s-flower-shop-part-4" class="header-anchor">#</a> Sally's Flower Shop - Part 4</h1> <p><a href="https://github.com/odoo-ps/psae-btco/commit/e0ca8f6d454de2efce5f69d95f166eda816e4185" target="_blank" rel="noopener noreferrer">View the commit for this solution<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>For this exercise, we have to set the tracking of flower products to <em>By Unique Serial Number</em>. This option can be found
under the <em>Inventory</em> tab in the product's form view.</p> <p><img src="/psae-btco/assets/img/part-4-img-1.39715def.png" alt="Track by unique serial number"></p> <h3 id="one-to-many-relation"><a href="#one-to-many-relation" class="header-anchor">#</a> One-to-Many Relation</h3> <p>Once we create the new model for storing information about watering flowers, we have to establish a relationship
between <code>flower.water</code> and <code>stock.production.lot</code>. Note that we use <code>stock.production.lot</code> model in order to add serial
numbers to flowers. Moreover, one serial numbered flower can be watered multiple times, indicating that we need
a <code>one2many</code> field inside <code>stock.production.lot</code>. Whenever a <code>one2many</code> field is used, we have to specify the
attribute <code>inverse_name</code> which is the name of the <code>many2one</code> field in the other model. In our case, the <code>many2one</code> field
is called <code>serial_id</code>.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">StockProductionLot</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    _inherit <span class="token operator">=</span> <span class="token string">&quot;stock.production.lot&quot;</span>

    water_ids <span class="token operator">=</span> fields<span class="token punctuation">.</span>One2many<span class="token punctuation">(</span><span class="token string">&quot;flower.water&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;serial_id&quot;</span><span class="token punctuation">)</span>
</code></pre></div><div style="display:inline-flex;margin-bottom:12px;" data-v-37099482><button data-v-37099482><div data-v-37099482>View Code</div></button></div> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">FlowerWater</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    _name <span class="token operator">=</span> <span class="token string">&quot;flower.water&quot;</span>
    _description <span class="token operator">=</span> <span class="token string">&quot;Flower Watering&quot;</span>
    _order <span class="token operator">=</span> <span class="token string">&quot;date&quot;</span>

    serial_id <span class="token operator">=</span> fields<span class="token punctuation">.</span>Many2one<span class="token punctuation">(</span><span class="token string">&quot;stock.production.lot&quot;</span><span class="token punctuation">)</span>
</code></pre></div><div style="display:inline-flex;margin-bottom:12px;" data-v-37099482><button data-v-37099482><div data-v-37099482>View Code</div></button></div> <p>This relational field is <em>bidirectional</em> in nature, meaning the user can either go to a serial numbered
flower to water it multiple times (i.e. add multiple <code>flower.water</code> records to <code>water_ids</code>), or set the <code>serial_id</code>
field inside a <code>flower.water</code> record. In both cases, the result will be the same.</p> <h3 id="action-button"><a href="#action-button" class="header-anchor">#</a> Action Button</h3> <p>We will add
an <a href="https://www.odoo.com/documentation/16.0/developer/howtos/rdtraining/10_actions.html#action-type" target="_blank" rel="noopener noreferrer">action button<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in
the form view of <code>stock.production.lot</code> model and bind a Python method to it. To implement this, first we will inherit
the form view and write an XPath expression to place the button in the form's header. Note that we added a
field <code>is_flower</code> which is related to <code>product_id.is_flower</code>. This field is then used to conditionally show the button.
Furthermore, the <code>name</code> attribute of the button is where a Python method is bound. Therefore, the next step is to define
the logic to execute once this button is pressed.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>odoo</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>record</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ir.ui.view<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inherit_id<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stock.view_production_lot_form<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xpath</span> <span class="token attr-name">expr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//sheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>before<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>is_flower<span class="token punctuation">&quot;</span></span> <span class="token attr-name">invisible</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">string</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Water Flower<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>object<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action_water_flower<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oe_highlight<span class="token punctuation">&quot;</span></span>
                            <span class="token attr-name">attrs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">'</span>invisible<span class="token punctuation">'</span>: [(<span class="token punctuation">'</span>is_flower<span class="token punctuation">'</span>, <span class="token punctuation">'</span>=<span class="token punctuation">'</span>, False)]}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xpath</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>record</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>odoo</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div style="display:inline-flex;margin-bottom:12px;" data-v-37099482><button data-v-37099482><div data-v-37099482>View Code</div></button></div> <p>We will define a Python method <code>action_water_flower</code> that will check the last date a flower was watered and the
watering frequency. If the number of days passed since the last watering date is equal to or greater than the watering
frequency, create a <code>flower.water</code> record. The main challenge however, is to carry out this logic not for one but
multiple records. As a matter of fact, it is generally considered a good practice to write Python methods that can
handle a recordset because if the logic works for multiple records, then it will always work for a single record. On the
other hand, methods for handling single records do not necessarily work with multiple records.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">action_water_flower</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    flowers <span class="token operator">=</span> self<span class="token punctuation">.</span>filtered<span class="token punctuation">(</span><span class="token keyword">lambda</span> rec<span class="token punctuation">:</span> rec<span class="token punctuation">.</span>is_flower<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">for</span> record <span class="token keyword">in</span> flowers<span class="token punctuation">:</span>
        <span class="token keyword">if</span> record<span class="token punctuation">.</span>water_ids<span class="token punctuation">:</span>
            last_watered_date <span class="token operator">=</span> record<span class="token punctuation">.</span>water_ids<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>date
            frequency <span class="token operator">=</span> record<span class="token punctuation">.</span>product_id<span class="token punctuation">.</span>flower_id<span class="token punctuation">.</span>watering_frequency
            today <span class="token operator">=</span> fields<span class="token punctuation">.</span>Date<span class="token punctuation">.</span>today<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>today <span class="token operator">-</span> last_watered_date<span class="token punctuation">)</span><span class="token punctuation">.</span>days <span class="token operator">&lt;</span> frequency<span class="token punctuation">:</span>
                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
                <span class="token keyword">continue</span>
        self<span class="token punctuation">.</span>env<span class="token punctuation">[</span><span class="token string">&quot;flower.water&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string">&quot;serial_id&quot;</span><span class="token punctuation">:</span> record<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><div style="display:inline-flex;margin-bottom:12px;" data-v-37099482><button data-v-37099482><div data-v-37099482>View Code</div></button></div> <h3 id="constraint"><a href="#constraint" class="header-anchor">#</a> Constraint</h3> <p>Adding <a href="https://www.odoo.com/documentation/16.0/developer/howtos/backend.html#model-constraints" target="_blank" rel="noopener noreferrer">constraints<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> in models
is super easy. However, instead of adding a new method and using the decorator <code>constrains</code> we simply added a
check (i.e. the if-statement) inside <code>action_water_flower</code>. The rationale for this is that the only way a <code>flower.water</code>
record can be
created is through our defined method. The user cannot manually create or change a record. Hence, there is no need to
specify a model-level constraint.</p> <h3 id="server-action"><a href="#server-action" class="header-anchor">#</a> Server Action</h3> <p><a href="https://www.odoo.com/documentation/16.0/developer/reference/backend/actions.html#server-actions-ir-actions-server" target="_blank" rel="noopener noreferrer">Server actions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
are operations that can be performed automatically, or manually, on the recordset of a model. We defined a server action
in <code>actions.xml</code>. The best part about our server action is that it calls the same Python method we defined for our
action button (i.e. <code>action_water_flower</code>). Moreover, the action can be applied to multiple records thanks to the way
the method was implemented. Now, we can select several serial numbered flowers from the list view and run the server
action.</p> <p><img src="/psae-btco/assets/img/part-4-img-2.5574d45a.png" alt="Server action to water multiple flowers"></p> <h3 id="smart-button"><a href="#smart-button" class="header-anchor">#</a> Smart Button</h3> <p>Smart buttons are great visuals that can provide stats and references in a compact view. We will add a smart button
on <code>stock.production.lot</code> form view that will display all the watering times for a flower. This is completely optional
as you can simply add the field <code>water_ids</code> as
an <a href="https://www.odoo.com/documentation/16.0/developer/howtos/rdtraining/12_sprinkles.html#inline-views" target="_blank" rel="noopener noreferrer">inline view<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
instead. But for now, let us show off by adding a <code>button</code> element that has the class <code>oe_state_button</code>. Also, we will
bind a Python method so that when the smart button is clicked, it will redirect the user to a list view of watering
times.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>odoo</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>record</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ir.ui.view<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            ...
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xpath</span> <span class="token attr-name">expr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//div[@name=<span class="token punctuation">'</span>button_box<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>inside<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>oe_stat_button<span class="token punctuation">&quot;</span></span>
                        <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action_open_watering_times<span class="token punctuation">&quot;</span></span>
                        <span class="token attr-name">icon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>fa-shower<span class="token punctuation">&quot;</span></span>
                        <span class="token attr-name">attrs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">'</span>invisible<span class="token punctuation">'</span>: [(<span class="token punctuation">'</span>is_flower<span class="token punctuation">'</span>, <span class="token punctuation">'</span>=<span class="token punctuation">'</span>, False)]}<span class="token punctuation">&quot;</span></span>
                        <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>object<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>o_field_widget o_stat_info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>o_stat_text text-wrap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Watering Times<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xpath</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>record</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>odoo</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The method <code>action_open_watering_times</code> will return a window action that contains a lot of specifications such as the
type of action, the model, the view mode, etc. As opposed to creating an XML record for a window action
in <a href="https://odoo-ps.github.io/psae-btco/solutions/flower_shop_2.html#flower-only-products" target="_blank" rel="noopener noreferrer">Part 2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, we
are creating a window action on-the-fly by returning a dictionary from a Python method.</p> <p>Here is how the form view would look like for a serial numbered flower record.
<img src="/psae-btco/assets/img/part-4-img-3.69c8705e.png" alt="Form view of serial numbered flower"></p> <h3 id="record-naming"><a href="#record-naming" class="header-anchor">#</a> Record Naming</h3> <p>If a model contains a character field called <code>name</code>, the ORM uses this field's value to render a label for the record.
For example, if you try to select a customer when creating a sale quotation, the drop-down shows records
of <code>res.partner</code> model either by name if the record is a company, or by name and the company name if it is an
individual. Since the <code>flower.flower</code> model does not have a <code>name</code> field, we have to override the method <code>name_get</code>. The
method returns a list of tuples where a tuple consists of the record's ID and a string as the label.</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">name_get</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>flower<span class="token punctuation">.</span><span class="token builtin">id</span><span class="token punctuation">,</span> <span class="token string">&quot;{} ({})&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>flower<span class="token punctuation">.</span>scientific_name<span class="token punctuation">,</span> flower<span class="token punctuation">.</span>common_name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">for</span> flower <span class="token keyword">in</span> self<span class="token punctuation">]</span>
</code></pre></div><p>This is how a flower record looked in <code>flower_id</code> field in <code>product.product</code> model's form view before overriding the
method.
<img src="/psae-btco/assets/img/part-4-img-4.7904534c.png" alt="Flower record labels before"></p> <p>And this is after overriding.
<img src="/psae-btco/assets/img/part-4-img-5.ef3de7cd.png" alt="Flower record labels after"></p> <p>This marks the completion of part 4 of the case study.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/psae-btco/solutions/flower_shop_3.html" class="prev">
        Part 3
      </a></span> <span class="next"><a href="/psae-btco/solutions/flower_shop_5.html">
        Part 5
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/psae-btco/assets/js/app.d63afb61.js" defer></script><script src="/psae-btco/assets/js/2.3969ddc5.js" defer></script><script src="/psae-btco/assets/js/3.7f90f6a6.js" defer></script><script src="/psae-btco/assets/js/5.6d5f03cc.js" defer></script>
  </body>
</html>
