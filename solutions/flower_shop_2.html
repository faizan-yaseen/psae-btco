<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sally&#39;s Flower Shop - Part 2 | Backend Technical Consultant Onboarding (BTCO)</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Exercises, codes and solutions for the BTCO training program">
    
    <link rel="preload" href="/psae-btco/assets/css/0.styles.ae6c4b4b.css" as="style"><link rel="preload" href="/psae-btco/assets/js/app.d63afb61.js" as="script"><link rel="preload" href="/psae-btco/assets/js/2.3969ddc5.js" as="script"><link rel="preload" href="/psae-btco/assets/js/9.d1355fc0.js" as="script"><link rel="preload" href="/psae-btco/assets/js/5.6d5f03cc.js" as="script"><link rel="prefetch" href="/psae-btco/assets/js/10.5bcde458.js"><link rel="prefetch" href="/psae-btco/assets/js/11.cf8f5c7a.js"><link rel="prefetch" href="/psae-btco/assets/js/12.9b295f8f.js"><link rel="prefetch" href="/psae-btco/assets/js/13.0fc82dc5.js"><link rel="prefetch" href="/psae-btco/assets/js/14.2e0c10cb.js"><link rel="prefetch" href="/psae-btco/assets/js/15.c65f983f.js"><link rel="prefetch" href="/psae-btco/assets/js/16.89195d07.js"><link rel="prefetch" href="/psae-btco/assets/js/17.1a7e901b.js"><link rel="prefetch" href="/psae-btco/assets/js/18.d0f79296.js"><link rel="prefetch" href="/psae-btco/assets/js/19.e238475a.js"><link rel="prefetch" href="/psae-btco/assets/js/20.c1014938.js"><link rel="prefetch" href="/psae-btco/assets/js/21.88562d51.js"><link rel="prefetch" href="/psae-btco/assets/js/22.550cd687.js"><link rel="prefetch" href="/psae-btco/assets/js/23.65c8ca17.js"><link rel="prefetch" href="/psae-btco/assets/js/24.7fd49ae9.js"><link rel="prefetch" href="/psae-btco/assets/js/25.2466cc21.js"><link rel="prefetch" href="/psae-btco/assets/js/26.0896e2ab.js"><link rel="prefetch" href="/psae-btco/assets/js/27.137735d7.js"><link rel="prefetch" href="/psae-btco/assets/js/28.0a0cdb1a.js"><link rel="prefetch" href="/psae-btco/assets/js/29.d6730b7b.js"><link rel="prefetch" href="/psae-btco/assets/js/3.7f90f6a6.js"><link rel="prefetch" href="/psae-btco/assets/js/30.3a3765e2.js"><link rel="prefetch" href="/psae-btco/assets/js/4.bcf7b13f.js"><link rel="prefetch" href="/psae-btco/assets/js/6.3ab397f0.js"><link rel="prefetch" href="/psae-btco/assets/js/7.a39ec6a2.js"><link rel="prefetch" href="/psae-btco/assets/js/8.87f68678.js">
    <link rel="stylesheet" href="/psae-btco/assets/css/0.styles.ae6c4b4b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/psae-btco/" class="home-link router-link-active"><!----> <span class="site-name">Backend Technical Consultant Onboarding (BTCO)</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/psae-btco/" aria-current="page" class="sidebar-link">Howdy Partner</a></li><li><section class="sidebar-group depth-0"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active"><span>Exercises</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active open"><span>Sally's Flower Shop</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/psae-btco/exercises/flower_shop.html" class="sidebar-link">Part 1</a></li><li><a href="/psae-btco/exercises/flower_shop_2.html" class="sidebar-link">Part 2</a></li><li><a href="/psae-btco/exercises/flower_shop_3.html" class="sidebar-link">Part 3</a></li><li><a href="/psae-btco/exercises/flower_shop_4.html" class="sidebar-link">Part 4</a></li><li><a href="/psae-btco/exercises/flower_shop_5.html" class="sidebar-link">Part 5</a></li><li><a href="/psae-btco/exercises/flower_shop_6.html" class="sidebar-link">Part 6</a></li><li><a href="/psae-btco/exercises/flower_shop_7.html" class="sidebar-link">Part 7</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active"><span>Awesome School</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active"><span>Realty Management</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active open"><span>Solutions</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/psae-btco/" class="sidebar-heading clickable router-link-active open"><span>Sally's Flower Shop</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/psae-btco/solutions/flower_shop.html" class="sidebar-link">Part 1</a></li><li><a href="/psae-btco/solutions/flower_shop_2.html" aria-current="page" class="active sidebar-link">Part 2</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/psae-btco/solutions/flower_shop_3.html" class="sidebar-link">Part 3</a></li><li><a href="/psae-btco/solutions/flower_shop_4.html" class="sidebar-link">Part 4</a></li><li><a href="/psae-btco/solutions/flower_shop_5.html" class="sidebar-link">Part 5</a></li><li><a href="/psae-btco/solutions/flower_shop_6.html" class="sidebar-link">Part 6</a></li><li><a href="/psae-btco/solutions/flower_shop_7.html" class="sidebar-link">Part 7</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="sally-s-flower-shop-part-2"><a href="#sally-s-flower-shop-part-2" class="header-anchor">#</a> Sally's Flower Shop - Part 2</h1> <p><a href="https://github.com/odoo-ps/psae-btco/commit/bfc90b73ec1030971c4b4350c8ae35f9284b3036" target="_blank" rel="noopener noreferrer">View the commit for this solution<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>In this exercise, we are going to add
a <a href="https://www.odoo.com/documentation/16.0/developer/howtos/backend.html#relations-between-models" target="_blank" rel="noopener noreferrer">relation between two models<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: <code>flower.flower</code>
and <code>product.product</code>. There are
a few judgement calls to be made before relating the two models.</p> <h3 id="questions"><a href="#questions" class="header-anchor">#</a> Questions</h3> <h4 id="what-relational-field-should-i-use"><a href="#what-relational-field-should-i-use" class="header-anchor">#</a> What relational field should I use?</h4> <p>What we need is a one-to-one mapping between a product and a flower. However, Odoo does not provide such a relation,
instead we will be using a <code>Many2one</code> relational field to achieve this mapping.</p> <h4 id="in-which-model-should-i-place-the-field"><a href="#in-which-model-should-i-place-the-field" class="header-anchor">#</a> In which model should I place the field?</h4> <p>This is where we have to beg the question: &quot;Do we need a reference to the product record from the flower record, or is
it the other way round?&quot;. The answer is that we need a reference to the flower record from the product record. This is
because in sale order lines we choose products not flowers, and a product may or may not be a flower.</p> <h4 id="what-would-be-the-consequence-of-placing-the-field-in-the-other-model"><a href="#what-would-be-the-consequence-of-placing-the-field-in-the-other-model" class="header-anchor">#</a> What would be the consequence of placing the field in the other model?</h4> <p>The consequence would be doing a lot of search queries. Every time we would want to get a reference to the flower of a
product in a sale order line, it would require us to search through all the flower records where the product field
matches the product of the sale order line. On the other hand, following the other approach means getting the flower
record in the sale order line would be as simple as <code>product_id.flower_id</code>!</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">Product</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    _inherit <span class="token operator">=</span> <span class="token string">&quot;product.product&quot;</span>

    is_flower <span class="token operator">=</span> fields<span class="token punctuation">.</span>Boolean<span class="token punctuation">(</span><span class="token string">&quot;Is Flower Product?&quot;</span><span class="token punctuation">)</span>
    flower_id <span class="token operator">=</span> fields<span class="token punctuation">.</span>Many2one<span class="token punctuation">(</span><span class="token string">&quot;flower.flower&quot;</span><span class="token punctuation">)</span>
</code></pre></div><div style="display:inline-flex;margin-bottom:12px;" data-v-37099482><button data-v-37099482><div data-v-37099482>View Code</div></button></div> <h3 id="view-inheritance"><a href="#view-inheritance" class="header-anchor">#</a> View Inheritance</h3> <p>The next step is to add the fields in the form view of <code>product.product</code> model. Note that this view is for a product
variant, not a product template. In case you are unable to find this view, please install the Sales app (technical
name: <code>sale_management</code>). Also, this is the first time we are going to
do <a href="https://www.odoo.com/documentation/16.0/developer/howtos/rdtraining/13_inheritance.html#view-inheritance" target="_blank" rel="noopener noreferrer">view inheritance<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>
because we will add fields to
an existing view.
<img src="/psae-btco/assets/img/part-2-img-1.46d9af2c.png" alt="Form view of product.product"></p> <h3 id="reliable-xpath-expressions"><a href="#reliable-xpath-expressions" class="header-anchor">#</a> Reliable XPath Expressions</h3> <p>It is important that
our <a href="https://www.odoo.com/documentation/16.0/developer/reference/backend/views.html#inheritance-specs" target="_blank" rel="noopener noreferrer">XPath expressions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> (<code>expr</code>
attribute) do not break or behave unexpectedly with future version releases. The easiest pitfall to avoid is to not use
list indexing e.g. <code>/div[1]</code>. Imagine what would happen if a sibling or a parent <code>div</code> element was added in a future
release. This expression would result in referring to the newly added element instead and hence, produce incorrect
behavior. A more reliable approach is to use attributes that may be unique to the element you are looking for. For
example, we use the <code>name</code> attribute with the value <code>categ_id</code> to look for a <code>field</code> element.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>odoo</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>record</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ir.ui.view<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xpath</span> <span class="token attr-name">expr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//field[@name=<span class="token punctuation">'</span>categ_id<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>after<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                ...
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xpath</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>record</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>odoo</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div style="display:inline-flex;margin-bottom:12px;" data-v-37099482><button data-v-37099482><div data-v-37099482>View Code</div></button></div> <h3 id="flower-only-products"><a href="#flower-only-products" class="header-anchor">#</a> Flower-Only Products</h3> <p>Another requirement is to display all flower products with the click of
a <a href="https://www.odoo.com/documentation/16.0/developer/howtos/backend.html#actions-and-menus" target="_blank" rel="noopener noreferrer">menu item<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. First, we will
define a window action where the field <code>res_model</code> will be <code>product.product</code> because we wish to view records of this
model. Then, we will specify the <code>domain</code> field in order to filter for flower products only. Moreover, the <code>view_mode</code>
will list all the view types in which the user can see the records. Lastly, since the user may create a new flower
product from these views, we want to set the boolean field <code>is_flower</code> in the record to true by default. To achieve
this, we will pass some default value through the <code>context</code> field.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>odoo</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>record</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ir.actions.act_window<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>res_model<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>product.product<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>view_mode<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>kanban,tree,form,activity<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>context<span class="token punctuation">&quot;</span></span> <span class="token attr-name">eval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">'</span>default_is_flower<span class="token punctuation">'</span>: True}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>domain<span class="token punctuation">&quot;</span></span> <span class="token attr-name">eval</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[(<span class="token punctuation">'</span>is_flower<span class="token punctuation">'</span>, <span class="token punctuation">'</span>=<span class="token punctuation">'</span>, True)]<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        ...
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>record</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>odoo</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div style="display:inline-flex;margin-bottom:12px;" data-v-37099482><button data-v-37099482><div data-v-37099482>View Code</div></button></div> <p>When creating the menu item, we have to identify the exact location for it. We want to place it under
Sales/Products menu and therefore, the <code>parent</code> field must be specified with the correct XML ID. Additionally, we have
to bind the window action to it, and we can optionally define a sequence to place it before or after one of its
sibling menu items. Note that whenever the XML ID of a record belongs to a different module, we have to use the module
name as a convention, in other words, <em>module_name.xml_id</em>. And since we are referring to another module, the module
must be added as a dependency in the manifest.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>odoo</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>menuitem</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action_flower_product<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sale.product_menu_catalog<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">sequence</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>odoo</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div style="display:inline-flex;margin-bottom:12px;" data-v-37099482><button data-v-37099482><div data-v-37099482>View Code</div></button></div> <p>By the end of this, you should have a menu item similar to the screenshot below.
<img src="/psae-btco/assets/img/part-2-img-2.91d368bf.png" alt="Menu item for flower products"></p> <h3 id="domain"><a href="#domain" class="header-anchor">#</a> Domain</h3> <p>The last bit of this exercise requires adding a domain on <code>product_id</code> field in the model <code>sale.order.line</code>. Upon
investigation, we find that the field already contains a domain defined in XML in the form view. To change this, we will
have to inherit the form view and add an XPath to modify the field's domain. However, we cannot afford to lose the old
domain by replacing with a new one as it may lead to unexpected behaviors. This is why we will copy-paste the existing
domain and modify it to ensure that only flower products are displayed in the lines.</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>odoo</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>record</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>...<span class="token punctuation">&quot;</span></span> <span class="token attr-name">model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ir.ui.view<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        ...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>field</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>arch<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xml<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>xpath</span> <span class="token attr-name">expr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>//field[@name=<span class="token punctuation">'</span>order_line<span class="token punctuation">'</span>]/tree/field[@name=<span class="token punctuation">'</span>product_id<span class="token punctuation">'</span>]<span class="token punctuation">&quot;</span></span> <span class="token attr-name">position</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>attributes<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>attribute</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>domain<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>[('sale_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=',
                    parent.company_id), ('is_flower', '=', True)]
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>attribute</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>xpath</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>field</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>record</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>odoo</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div style="display:inline-flex;margin-bottom:12px;" data-v-37099482><button data-v-37099482><div data-v-37099482>View Code</div></button></div> <p>This marks the completion of part 2 of the case study.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/psae-btco/solutions/flower_shop.html" class="prev">
        Part 1
      </a></span> <span class="next"><a href="/psae-btco/solutions/flower_shop_3.html">
        Part 3
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/psae-btco/assets/js/app.d63afb61.js" defer></script><script src="/psae-btco/assets/js/2.3969ddc5.js" defer></script><script src="/psae-btco/assets/js/9.d1355fc0.js" defer></script><script src="/psae-btco/assets/js/5.6d5f03cc.js" defer></script>
  </body>
</html>
